<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="./js/jquery-3.4.1.js"></script>
</head>

<script type="text/javascript">
	function update(value) {

		if(value==1 ){
			//可以輸入資料了阿
			　document.getElementById('article_title').disabled=false;　
			　document.getElementById('article_content').disabled=false;　
			　document.getElementById('articleimage').disabled=false;
			　document.getElementById('subject').disabled=false;　
			　document.getElementById('location').disabled=false;　
			　document.getElementById('starteTime').disabled=false;　
			　document.getElementById('endTime').disabled=false;　
			
			 $(document).ready(function(){
		            $(':input').css
		            ('outline','auto');
		        });
			 
			 
			 $(document).ready(function(){
		            $('textarea').css
		            ('outline','auto');
		     
		        });
		}
		
		
	
		
		}

	function Delete(articleId) {
		 alert("Delete_function")
		 

		 
		 document.forms[0].action = "<c:url value='/forum/UpdateItem.do?cmd=DEL&articleIdStr="+ articleId+"'/>";
		 document.forms[0].method="POST";
		 document.forms[0].submit();
		 
	}
	function COM(articleId){
		article_title=document.getElementById('article_title').value;
		
		article_content=document.getElementById('article_content').value;
		
		subject=document.getElementById('subject').value;
		
		LC=document.getElementById('location').value;
 		
		starteTime=document.getElementById('starteTime').value;
		
		endTime=document.getElementById('endTime').value;
		
		 var encodeimage ; 
		 var articleimage = document.getElementById('articleimage').files;


			 if (articleimage.length > 0) {  // img.length > 0
				    getBase64(articleimage[0]); //img[0]
				  }
		 
			 
			 	function getBase64(file) {
				var reader = new FileReader();
				 
				 reader.readAsDataURL(file);
				 
				 reader.onload = function () {
				encodeimage = reader.result
				console.log("我的圖片編碼結果"+encodeimage)//有值
				

				
				console.log(article_title) //有值
				console.log(article_content) //有值
				console.log(subject) //有值
				console.log(LC) //有值
				console.log(starteTime) //有值
				console.log(endTime) //有值
				
				document.forms[0].action ="<c:url value='/forum/UpdateItem.do?cmd=MOD&articleIdStr="+ articleId+"&article_title="+article_title+"&article_content="+article_content+"&articleimageStr="+encodeimage+"&subject="+subject+"&location="+LC+"&starteTimeStr="+starteTime+"&endTimeStr="+endTime+"'/>";	
				document.forms[0].method="POST";
				document.forms[0].submit();
			 }
			 }
				 
				 
}

	

</script>





<style>
input, select, textarea {
	background: window;
	outline: none;
	border: none;
	padding: 0px;
	margin: 0px;
	outline: none;
	padding: 0px;
}

textarea {
	background: window;
	height: 250px;
	weight: 200px;
	resize: none;
}
</style>

<body>

	<h1>查詢結果</h1>



	<c:forEach var="launchMembers" items="${launchMembers}">
		<%-- 		熱門看板:	${DecoderFname} --%>

		<h1 id="article_Id">文章編號${ launchMembers.article_Id }的資料</h1>
		<h2 id="article_m_id">會員: ${ launchMembers.article_m_id }</h2>
		<br>

		<div>
			<label for="article_title">活動標題:</label> <input type="text"
				id="article_title" name="article_title" size="100" disabled
				placeholder="標題不能少於10個字" value="${launchMembers.article_title }" />
		</div>
		<div>
			<label for="article_content">活動內容:</label> <br>
			<textarea cols="112" rows="5" placeholder="內容不能少於100個字" disabled
				name="article_content" id="article_content">${launchMembers.article_content }</textarea>
		</div>
		<br>
		<div>
			<label class="fontSize">活動圖片:</label>&nbsp;
			${launchMembers.articleimage } <br> <input name="articleimage"
				type="File" disabled value="${launchMembers.articleimage }"
				id="articleimage" /><br />&nbsp;
		</div>
		<div>
			<label for="subject">活動主題:</label> <input type="text" id="subject"
				name="subject" disabled size="100" value="${launchMembers.subject}" />
		</div>
		<br>

		<div>
			<label for="location">活動地點::</label> <select name="location"
				id="location" disabled>
				<option value="${ launchMembers.location }">${ launchMembers.location }</option>
				<option value="Taipei">台北</option>
				<option value="Keelung">基隆</option>
				<option value="NewTaipei">新北</option>
				<option value="Taoyuan">桃園</option>
				<option value="Hsinchu">新竹</option>
				<option value="Miaoli">苗栗</option>
				<option value="Taichung">台中</option>
				<option value="Changhua">彰化</option>
				<option value="Nantou">南投</option>
				<option value="Yunlin">雲林</option>
				<option value="Chiayi">嘉義</option>
				<option value="Tainan">台南</option>
				<option value="Kaohsiung">高雄</option>
				<option value="Pingtung">屏東</option>
				<option value="Taitung">台東</option>
				<option value="Hualien">花蓮</option>
				<option value="Yilan">宜蘭</option>
				<option value="insland">外島</option>
			</select>
		</div>
		<br>
			PO文時間: ${ launchMembers.post_Time }<br>
		<br>
		<div>
			<label for="starteTime">活動開始時間:</label> <input type="date"
				name="starteTime" tabindex="7" disabled
				value="${launchMembers.startTime}" id="starteTime" /><br>
			原始活動開始時間${launchMembers.startTime}<br>
		</div>

		<br>

		<div>
			<label for="endTime">活動結束時間:</label> <input type="date"
				name="endTime" tabindex="7" disabled id="endTime"
				value="${ launchMembers.endTime }" /><br> 原始活動結束${ launchMembers.endTime }<br>
		</div>
		<div>
			<label for="subject">人氣:</label> <input type="text" id="subject"
				name="subject" disabled size="100"
				value="${launchMembers.popularity}" />
		</div>
		<br>

		<button name="update" value="update" onclick="update(1)">修改</button>
		<button name="delete" value="delete"
			onclick="Delete(${ launchMembers.article_Id })">刪除</button>
		<button name="confirm" value="confirm"
			onclick="COM(${launchMembers.article_Id})">確認</button>

		<hr>

	</c:forEach>

	<form enctype="multipart/form-data">
		<input type="hidden" name="a" />
	</form>


</body>
</html>